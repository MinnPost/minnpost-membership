'use strict';

(function ($) {

	function showMemberLevelFields() {
		var $toggle = $('#minnpost_membership_use_member_levels');
		// Toggle the field type
		$toggle.on('click', function (e) {
			var checkbox = $(this);
			if (checkbox.is(':checked')) {
				$('.minnpost-membership-member-levels').show();
				$('.minnpost-member-field.minnpost_membership_frequency_options, .minnpost-member-field.minnpost_membership_default_frequency').show();
			} else {
				$('.minnpost-membership-member-levels').hide();
				$('.minnpost-member-field.minnpost_membership_frequency_options, .minnpost-member-field.minnpost_membership_default_frequency').hide();
			}
		});
	}

	function toggleMembershipChangeFields() {
		var $toggle = $('#minnpost_membership_support_post_form_change_for_members');
		var fields = '.minnpost_membership_support_post_form_nochange, .minnpost_membership_support_post_form_change';
		if ($toggle.is(':checked')) {
			$(fields).show();
		} else {
			$(fields).hide();
		}
		$toggle.on('click', function (e) {
			var checkbox = $(this);
			if (checkbox.is(':checked')) {
				$(fields).show();
			} else {
				$(fields).hide();
			}
		});
	}

	function toggleActionFields(parent) {
		var $toggle = $('input[type="radio"]', $(parent));

		$($toggle).each(function () {
			$('.minnpost-member-field-' + $(this).val()).wrapAll('<tr class="minnpost-member-fields-wrap minnpost-member-fields-wrap-' + $(this).val() + '"><td colspan="2"><table />');
			$('.minnpost-member-fields-wrap').hide();
			$('.minnpost-member-fields-wrap-' + $(this).val() + ' table').before('<h3>' + $(this).parent().text() + ' settings</h3>');
		});

		if ($toggle.is(':checked')) {
			$('.minnpost-member-fields-wrap-' + $('input[type="radio"]:checked', $(parent)).val()).show();
		}
		$toggle.on('click', function (e) {
			var checkbox = $(this);

			$('.minnpost-member-fields-wrap').hide();

			if (checkbox.is(':checked')) {
				$('.minnpost-member-fields-wrap-' + $(this).val()).show();
			}
		});
	}

	$(document).ready(function () {

		// show or hide member level fields
		if ($('.minnpost_membership_use_member_levels').length > 0) {
			showMemberLevelFields();
		}

		if ($('.minnpost_membership_support_post_form_change_for_members').length > 0) {
			toggleMembershipChangeFields();
		}

		if ($('.minnpost-member-field-user-state-toggle').length > 0) {
			toggleActionFields('.minnpost-member-field-user-state-toggle');
		}

		$('.minnpost-membership-general-settings').minnpostMembership({
			'amount_viewer': '.amount h5',
			'frequency_selector_in_levels': 'input[name="minnpost_membership_default_frequency[]"]',
			'frequency_selector_in_levels_type': 'radio',
			'levels_container': '.minnpost-membership-member-levels',
			'single_level_container': '.minnpost-membership-member-level',
			'single_level_summary_selector': '.member-level-brief',
			'flipped_items': 'div.amount, div.enter',
			'level_frequency_text_selector': '.show-frequency'
		});
	});
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWJlci1sZXZlbHMuanMiXSwibmFtZXMiOlsiJCIsInNob3dNZW1iZXJMZXZlbEZpZWxkcyIsIiR0b2dnbGUiLCJvbiIsImUiLCJjaGVja2JveCIsImlzIiwic2hvdyIsImhpZGUiLCJ0b2dnbGVNZW1iZXJzaGlwQ2hhbmdlRmllbGRzIiwiZmllbGRzIiwidG9nZ2xlQWN0aW9uRmllbGRzIiwicGFyZW50IiwiZWFjaCIsInZhbCIsIndyYXBBbGwiLCJiZWZvcmUiLCJ0ZXh0IiwiZG9jdW1lbnQiLCJyZWFkeSIsImxlbmd0aCIsIm1pbm5wb3N0TWVtYmVyc2hpcCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFDLFVBQVNBLENBQVQsRUFBVzs7QUFFWCxVQUFTQyxxQkFBVCxHQUFpQztBQUNoQyxNQUFJQyxVQUFVRixFQUFFLHdDQUFGLENBQWQ7QUFDQTtBQUNBRSxVQUFRQyxFQUFSLENBQVcsT0FBWCxFQUFvQixVQUFTQyxDQUFULEVBQVk7QUFDL0IsT0FBSUMsV0FBV0wsRUFBRSxJQUFGLENBQWY7QUFDQSxPQUFJSyxTQUFTQyxFQUFULENBQVksVUFBWixDQUFKLEVBQTZCO0FBQzVCTixNQUFFLG9DQUFGLEVBQXdDTyxJQUF4QztBQUNBUCxNQUFFLDRIQUFGLEVBQWdJTyxJQUFoSTtBQUNBLElBSEQsTUFHTztBQUNOUCxNQUFFLG9DQUFGLEVBQXdDUSxJQUF4QztBQUNBUixNQUFFLDRIQUFGLEVBQWdJUSxJQUFoSTtBQUNBO0FBQ0QsR0FURDtBQVVBOztBQUVELFVBQVNDLDRCQUFULEdBQXdDO0FBQ3ZDLE1BQUlQLFVBQVVGLEVBQUUsMkRBQUYsQ0FBZDtBQUNBLE1BQUlVLFNBQVMsZ0dBQWI7QUFDQSxNQUFJUixRQUFRSSxFQUFSLENBQVcsVUFBWCxDQUFKLEVBQTRCO0FBQzNCTixLQUFFVSxNQUFGLEVBQVVILElBQVY7QUFDQSxHQUZELE1BRU87QUFDTlAsS0FBRVUsTUFBRixFQUFVRixJQUFWO0FBQ0E7QUFDRE4sVUFBUUMsRUFBUixDQUFXLE9BQVgsRUFBb0IsVUFBU0MsQ0FBVCxFQUFZO0FBQy9CLE9BQUlDLFdBQVdMLEVBQUUsSUFBRixDQUFmO0FBQ0EsT0FBSUssU0FBU0MsRUFBVCxDQUFZLFVBQVosQ0FBSixFQUE2QjtBQUM1Qk4sTUFBRVUsTUFBRixFQUFVSCxJQUFWO0FBQ0EsSUFGRCxNQUVPO0FBQ05QLE1BQUVVLE1BQUYsRUFBVUYsSUFBVjtBQUNBO0FBQ0QsR0FQRDtBQVFBOztBQUVELFVBQVNHLGtCQUFULENBQTZCQyxNQUE3QixFQUFzQztBQUNyQyxNQUFJVixVQUFVRixFQUFFLHFCQUFGLEVBQXlCQSxFQUFFWSxNQUFGLENBQXpCLENBQWQ7O0FBRUFaLElBQUVFLE9BQUYsRUFBV1csSUFBWCxDQUFnQixZQUFXO0FBQzFCYixLQUFHLDRCQUE0QkEsRUFBRSxJQUFGLEVBQVFjLEdBQVIsRUFBL0IsRUFBK0NDLE9BQS9DLENBQXdELHdFQUF3RWYsRUFBRSxJQUFGLEVBQVFjLEdBQVIsRUFBeEUsR0FBd0YsNkJBQWhKO0FBQ0FkLEtBQUcsOEJBQUgsRUFBb0NRLElBQXBDO0FBQ0FSLEtBQUcsa0NBQWtDQSxFQUFFLElBQUYsRUFBUWMsR0FBUixFQUFsQyxHQUFrRCxRQUFyRCxFQUFnRUUsTUFBaEUsQ0FBd0UsU0FBU2hCLEVBQUUsSUFBRixFQUFRWSxNQUFSLEdBQWlCSyxJQUFqQixFQUFULEdBQW1DLGdCQUEzRztBQUNHLEdBSko7O0FBTUEsTUFBSWYsUUFBUUksRUFBUixDQUFXLFVBQVgsQ0FBSixFQUE0QjtBQUMzQk4sS0FBRyxrQ0FBa0NBLEVBQUUsNkJBQUYsRUFBaUNBLEVBQUVZLE1BQUYsQ0FBakMsRUFBNkNFLEdBQTdDLEVBQXJDLEVBQTBGUCxJQUExRjtBQUNBO0FBQ0RMLFVBQVFDLEVBQVIsQ0FBVyxPQUFYLEVBQW9CLFVBQVNDLENBQVQsRUFBWTtBQUMvQixPQUFJQyxXQUFXTCxFQUFFLElBQUYsQ0FBZjs7QUFFQUEsS0FBRyw4QkFBSCxFQUFvQ1EsSUFBcEM7O0FBRUEsT0FBSUgsU0FBU0MsRUFBVCxDQUFZLFVBQVosQ0FBSixFQUE2QjtBQUM1Qk4sTUFBRyxrQ0FBa0NBLEVBQUUsSUFBRixFQUFRYyxHQUFSLEVBQXJDLEVBQXFEUCxJQUFyRDtBQUNBO0FBQ0QsR0FSRDtBQVNBOztBQUVEUCxHQUFFa0IsUUFBRixFQUFZQyxLQUFaLENBQWtCLFlBQVc7O0FBRTVCO0FBQ0EsTUFBSW5CLEVBQUUsd0NBQUYsRUFBNENvQixNQUE1QyxHQUFxRCxDQUF6RCxFQUE2RDtBQUM1RG5CO0FBQ0E7O0FBRUQsTUFBS0QsRUFBRSwyREFBRixFQUErRG9CLE1BQS9ELEdBQXdFLENBQTdFLEVBQWlGO0FBQ2hGWDtBQUNBOztBQUVELE1BQUtULEVBQUUsMENBQUYsRUFBOENvQixNQUE5QyxHQUF1RCxDQUE1RCxFQUFnRTtBQUMvRFQsc0JBQW9CLDBDQUFwQjtBQUNBOztBQUVEWCxJQUFFLHVDQUFGLEVBQTJDcUIsa0JBQTNDLENBQThEO0FBQzdELG9CQUFrQixZQUQyQztBQUU3RCxtQ0FBaUMsdURBRjRCO0FBRzdELHdDQUFzQyxPQUh1QjtBQUk3RCx1QkFBcUIsb0NBSndDO0FBSzdELDZCQUEyQixtQ0FMa0M7QUFNN0Qsb0NBQWtDLHFCQU4yQjtBQU83RCxvQkFBa0IsdUJBUDJDO0FBUTdELG9DQUFrQztBQVIyQixHQUE5RDtBQVdBLEVBMUJEO0FBNEJBLENBdEZELEVBc0ZHQyxNQXRGSCIsImZpbGUiOiJtaW5ucG9zdC1tZW1iZXJzaGlwLWFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpe1xuXG5cdGZ1bmN0aW9uIHNob3dNZW1iZXJMZXZlbEZpZWxkcygpIHtcblx0XHR2YXIgJHRvZ2dsZSA9ICQoJyNtaW5ucG9zdF9tZW1iZXJzaGlwX3VzZV9tZW1iZXJfbGV2ZWxzJyk7XG5cdFx0Ly8gVG9nZ2xlIHRoZSBmaWVsZCB0eXBlXG5cdFx0JHRvZ2dsZS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgY2hlY2tib3ggPSAkKHRoaXMpO1xuXHRcdFx0aWYgKGNoZWNrYm94LmlzKCc6Y2hlY2tlZCcpKSB7XG5cdFx0XHRcdCQoJy5taW5ucG9zdC1tZW1iZXJzaGlwLW1lbWJlci1sZXZlbHMnKS5zaG93KCk7XG5cdFx0XHRcdCQoJy5taW5ucG9zdC1tZW1iZXItZmllbGQubWlubnBvc3RfbWVtYmVyc2hpcF9mcmVxdWVuY3lfb3B0aW9ucywgLm1pbm5wb3N0LW1lbWJlci1maWVsZC5taW5ucG9zdF9tZW1iZXJzaGlwX2RlZmF1bHRfZnJlcXVlbmN5Jykuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLm1pbm5wb3N0LW1lbWJlcnNoaXAtbWVtYmVyLWxldmVscycpLmhpZGUoKTtcblx0XHRcdFx0JCgnLm1pbm5wb3N0LW1lbWJlci1maWVsZC5taW5ucG9zdF9tZW1iZXJzaGlwX2ZyZXF1ZW5jeV9vcHRpb25zLCAubWlubnBvc3QtbWVtYmVyLWZpZWxkLm1pbm5wb3N0X21lbWJlcnNoaXBfZGVmYXVsdF9mcmVxdWVuY3knKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b2dnbGVNZW1iZXJzaGlwQ2hhbmdlRmllbGRzKCkge1xuXHRcdHZhciAkdG9nZ2xlID0gJCgnI21pbm5wb3N0X21lbWJlcnNoaXBfc3VwcG9ydF9wb3N0X2Zvcm1fY2hhbmdlX2Zvcl9tZW1iZXJzJyk7XG5cdFx0dmFyIGZpZWxkcyA9ICcubWlubnBvc3RfbWVtYmVyc2hpcF9zdXBwb3J0X3Bvc3RfZm9ybV9ub2NoYW5nZSwgLm1pbm5wb3N0X21lbWJlcnNoaXBfc3VwcG9ydF9wb3N0X2Zvcm1fY2hhbmdlJztcblx0XHRpZiAoJHRvZ2dsZS5pcygnOmNoZWNrZWQnKSkge1xuXHRcdFx0JChmaWVsZHMpLnNob3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JChmaWVsZHMpLmhpZGUoKTtcblx0XHR9XG5cdFx0JHRvZ2dsZS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgY2hlY2tib3ggPSAkKHRoaXMpO1xuXHRcdFx0aWYgKGNoZWNrYm94LmlzKCc6Y2hlY2tlZCcpKSB7XG5cdFx0XHRcdCQoZmllbGRzKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGZpZWxkcykuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gdG9nZ2xlQWN0aW9uRmllbGRzKCBwYXJlbnQgKSB7XG5cdFx0dmFyICR0b2dnbGUgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCAkKHBhcmVudCkgKTtcblxuXHRcdCQoJHRvZ2dsZSkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdCQoICcubWlubnBvc3QtbWVtYmVyLWZpZWxkLScgKyAkKHRoaXMpLnZhbCgpICkud3JhcEFsbCggJzx0ciBjbGFzcz1cIm1pbm5wb3N0LW1lbWJlci1maWVsZHMtd3JhcCBtaW5ucG9zdC1tZW1iZXItZmllbGRzLXdyYXAtJyArICQodGhpcykudmFsKCkgKyAnXCI+PHRkIGNvbHNwYW49XCIyXCI+PHRhYmxlIC8+Jyk7XG5cdFx0XHQkKCAnLm1pbm5wb3N0LW1lbWJlci1maWVsZHMtd3JhcCcgKS5oaWRlKCk7XG5cdFx0XHQkKCAnLm1pbm5wb3N0LW1lbWJlci1maWVsZHMtd3JhcC0nICsgJCh0aGlzKS52YWwoKSArICcgdGFibGUnICkuYmVmb3JlKCAnPGgzPicgKyAkKHRoaXMpLnBhcmVudCgpLnRleHQoKSArICcgc2V0dGluZ3M8L2gzPicgKTtcblx0ICAgIH0pO1xuXG5cdFx0aWYgKCR0b2dnbGUuaXMoJzpjaGVja2VkJykpIHtcblx0XHRcdCQoICcubWlubnBvc3QtbWVtYmVyLWZpZWxkcy13cmFwLScgKyAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcsICQocGFyZW50KSApLnZhbCgpICkuc2hvdygpO1xuXHRcdH1cblx0XHQkdG9nZ2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdHZhciBjaGVja2JveCA9ICQodGhpcyk7XG5cblx0XHRcdCQoICcubWlubnBvc3QtbWVtYmVyLWZpZWxkcy13cmFwJyApLmhpZGUoKTtcblxuXHRcdFx0aWYgKGNoZWNrYm94LmlzKCc6Y2hlY2tlZCcpKSB7XG5cdFx0XHRcdCQoICcubWlubnBvc3QtbWVtYmVyLWZpZWxkcy13cmFwLScgKyAkKHRoaXMpLnZhbCgpICkuc2hvdygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cblx0XHQvLyBzaG93IG9yIGhpZGUgbWVtYmVyIGxldmVsIGZpZWxkc1xuXHRcdGlmICgkKCcubWlubnBvc3RfbWVtYmVyc2hpcF91c2VfbWVtYmVyX2xldmVscycpLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRzaG93TWVtYmVyTGV2ZWxGaWVsZHMoKTtcblx0XHR9XG5cblx0XHRpZiAoICQoJy5taW5ucG9zdF9tZW1iZXJzaGlwX3N1cHBvcnRfcG9zdF9mb3JtX2NoYW5nZV9mb3JfbWVtYmVycycpLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHR0b2dnbGVNZW1iZXJzaGlwQ2hhbmdlRmllbGRzKCk7XG5cdFx0fVxuXG5cdFx0aWYgKCAkKCcubWlubnBvc3QtbWVtYmVyLWZpZWxkLXVzZXItc3RhdGUtdG9nZ2xlJykubGVuZ3RoID4gMCApIHtcblx0XHRcdHRvZ2dsZUFjdGlvbkZpZWxkcyggJy5taW5ucG9zdC1tZW1iZXItZmllbGQtdXNlci1zdGF0ZS10b2dnbGUnICk7XG5cdFx0fVxuXG5cdFx0JCgnLm1pbm5wb3N0LW1lbWJlcnNoaXAtZ2VuZXJhbC1zZXR0aW5ncycpLm1pbm5wb3N0TWVtYmVyc2hpcCh7XG5cdFx0XHQnYW1vdW50X3ZpZXdlcicgOiAnLmFtb3VudCBoNScsXG5cdFx0XHQnZnJlcXVlbmN5X3NlbGVjdG9yX2luX2xldmVscycgOiAnaW5wdXRbbmFtZT1cIm1pbm5wb3N0X21lbWJlcnNoaXBfZGVmYXVsdF9mcmVxdWVuY3lbXVwiXScsXG5cdFx0XHQnZnJlcXVlbmN5X3NlbGVjdG9yX2luX2xldmVsc190eXBlJyA6ICdyYWRpbycsXG5cdFx0XHQnbGV2ZWxzX2NvbnRhaW5lcicgOiAnLm1pbm5wb3N0LW1lbWJlcnNoaXAtbWVtYmVyLWxldmVscycsXG5cdFx0XHQnc2luZ2xlX2xldmVsX2NvbnRhaW5lcicgOiAnLm1pbm5wb3N0LW1lbWJlcnNoaXAtbWVtYmVyLWxldmVsJyxcblx0XHRcdCdzaW5nbGVfbGV2ZWxfc3VtbWFyeV9zZWxlY3RvcicgOiAnLm1lbWJlci1sZXZlbC1icmllZicsXG5cdFx0XHQnZmxpcHBlZF9pdGVtcycgOiAnZGl2LmFtb3VudCwgZGl2LmVudGVyJyxcblx0XHRcdCdsZXZlbF9mcmVxdWVuY3lfdGV4dF9zZWxlY3RvcicgOiAnLnNob3ctZnJlcXVlbmN5Jyxcblx0XHR9KTtcblxuXHR9KTtcblxufSkoalF1ZXJ5KTtcbiJdfQ==
