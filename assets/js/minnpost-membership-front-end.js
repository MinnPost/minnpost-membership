'use strict';

// plugin
;(function ($, window, document, undefined) {

	// Create the defaults once
	var pluginName = 'minnpost_membership',
	    defaults = {
		'debug': false, // this can be set to true on page level options
		'frequency_selector': '.a-form-item-membership-frequency',
		'frequency_selector_type': 'select',
		'levels_container': '.o-membership-member-levels',
		'single_level_container': '.m-membership-member-level',
		'single_level_summary_selector': '.m-member-level-brief',
		'flipped_items': 'div.amount, div.enter',
		'amount_selector': '.enter input',
		'level_frequency_text_selector': '.show-frequency'
	}; // end defaults

	// The actual plugin constructor
	function Plugin(element, options) {

		this.element = element;

		// jQuery has an extend method which merges the contents of two or
		// more objects, storing the result in the first object. The first object
		// is generally empty as we don't want to alter the default options for
		// future instances of the plugin
		this.options = $.extend({}, defaults, options);

		this._defaults = defaults;
		this._name = pluginName;

		this.init();
	} // end constructor

	Plugin.prototype = {

		init: function init(reset, amount) {
			// Place initialization logic here
			// You already have access to the DOM element and
			// the options via the instance, e.g. this.element
			// and this.options
			// you can add more functions like the one below and
			// call them like so: this.yourOtherFunction(this.element, this.options).

			this.frequencySwitcher(this.element, this.options);
		},

		frequencySwitcher: function frequencySwitcher(element, options) {
			if (options.levels_container.length > 0) {
				$(options.single_level_summary_selector, element).each(function () {
					$(options.flipped_items, $(this)).wrapAll('<div class="flipper"/>');
				});
				$(options.frequency_selector, element).change(function (event) {
					var level_number = $(this).data('member-level-number');
					var frequencystring = $(this).val();
					var frequency = frequencystring.split(' - ')[1];
					var frequency_name = frequencystring.split(' - ')[0];
					if (typeof level_number !== 'undefined') {
						var amount = $(options.amount_selector + '[data-member-level-number="' + level_number + '"]').val();
						$(options.single_level_summary_selector, element).removeClass('flipped');
						$(options.single_level_summary_selector, element).removeClass('active');
						$(event.target).closest(options.single_level_summary_selector).addClass('flipped');
					} else if (options.level_frequency_text_selector.length > 0) {
						$(options.level_frequency_text_selector, element).text(frequency_name);
					}
				});
			}
		} // end frequencySwitcher

	}; // end Plugin.prototype

	// A really lightweight plugin wrapper around the constructor,
	// preventing against multiple instantiations
	$.fn[pluginName] = function (options) {
		return this.each(function () {
			if (!$.data(this, 'plugin_' + pluginName)) {
				$.data(this, 'plugin_' + pluginName, new Plugin(this, options));
			}
		});
	};
})(jQuery, window, document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWJlci1sZXZlbHMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwicGx1Z2luTmFtZSIsImRlZmF1bHRzIiwiUGx1Z2luIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJleHRlbmQiLCJfZGVmYXVsdHMiLCJfbmFtZSIsImluaXQiLCJwcm90b3R5cGUiLCJyZXNldCIsImFtb3VudCIsImZyZXF1ZW5jeVN3aXRjaGVyIiwibGV2ZWxzX2NvbnRhaW5lciIsImxlbmd0aCIsInNpbmdsZV9sZXZlbF9zdW1tYXJ5X3NlbGVjdG9yIiwiZWFjaCIsImZsaXBwZWRfaXRlbXMiLCJ3cmFwQWxsIiwiZnJlcXVlbmN5X3NlbGVjdG9yIiwiY2hhbmdlIiwiZXZlbnQiLCJsZXZlbF9udW1iZXIiLCJkYXRhIiwiZnJlcXVlbmN5c3RyaW5nIiwidmFsIiwiZnJlcXVlbmN5Iiwic3BsaXQiLCJmcmVxdWVuY3lfbmFtZSIsImFtb3VudF9zZWxlY3RvciIsInJlbW92ZUNsYXNzIiwidGFyZ2V0IiwiY2xvc2VzdCIsImFkZENsYXNzIiwibGV2ZWxfZnJlcXVlbmN5X3RleHRfc2VsZWN0b3IiLCJ0ZXh0IiwiZm4iLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQSxDQUFDLENBQUMsVUFBV0EsQ0FBWCxFQUFjQyxNQUFkLEVBQXNCQyxRQUF0QixFQUFnQ0MsU0FBaEMsRUFBNEM7O0FBRTdDO0FBQ0EsS0FBSUMsYUFBYSxxQkFBakI7QUFBQSxLQUNBQyxXQUFXO0FBQ1YsV0FBVSxLQURBLEVBQ087QUFDakIsd0JBQXVCLG1DQUZiO0FBR1YsNkJBQTRCLFFBSGxCO0FBSVYsc0JBQXFCLDZCQUpYO0FBS1YsNEJBQTJCLDRCQUxqQjtBQU1WLG1DQUFrQyx1QkFOeEI7QUFPVixtQkFBa0IsdUJBUFI7QUFRVixxQkFBb0IsY0FSVjtBQVNWLG1DQUFrQztBQVR4QixFQURYLENBSDZDLENBYzFDOztBQUVIO0FBQ0EsVUFBU0MsTUFBVCxDQUFp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Q0FsRkEsRUFrRkdpQyxNQWxGSCxFQWtGV3hDLE1BbEZYLEVBa0ZtQkMsUUFsRm5CIiwiZmlsZSI6Im1pbm5wb3N0LW1lbWJlcnNoaXAtZnJvbnQtZW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcGx1Z2luXG47KGZ1bmN0aW9uICggJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xuXG5cdC8vIENyZWF0ZSB0aGUgZGVmYXVsdHMgb25jZVxuXHR2YXIgcGx1Z2luTmFtZSA9ICdtaW5ucG9zdF9tZW1iZXJzaGlwJyxcblx0ZGVmYXVsdHMgPSB7XG5cdFx0J2RlYnVnJyA6IGZhbHNlLCAvLyB0aGlzIGNhbiBiZSBzZXQgdG8gdHJ1ZSBvbiBwYWdlIGxldmVsIG9wdGlvbnNcblx0XHQnZnJlcXVlbmN5X3NlbGVjdG9yJyA6ICcuYS1mb3JtLWl0ZW0tbWVtYmVyc2hpcC1mcmVxdWVuY3knLFxuXHRcdCdmcmVxdWVuY3lfc2VsZWN0b3JfdHlwZScgOiAnc2VsZWN0Jyxcblx0XHQnbGV2ZWxzX2NvbnRhaW5lcicgOiAnLm8tbWVtYmVyc2hpcC1tZW1iZXItbGV2ZWxzJyxcblx0XHQnc2luZ2xlX2xldmVsX2NvbnRhaW5lcicgOiAnLm0tbWVtYmVyc2hpcC1tZW1iZXItbGV2ZWwnLFxuXHRcdCdzaW5nbGVfbGV2ZWxfc3VtbWFyeV9zZWxlY3RvcicgOiAnLm0tbWVtYmVyLWxldmVsLWJyaWVmJyxcblx0XHQnZmxpcHBlZF9pdGVtcycgOiAnZGl2LmFtb3VudCwgZGl2LmVudGVyJyxcblx0XHQnYW1vdW50X3NlbGVjdG9yJyA6ICcuZW50ZXIgaW5wdXQnLFxuXHRcdCdsZXZlbF9mcmVxdWVuY3lfdGV4dF9zZWxlY3RvcicgOiAnLnNob3ctZnJlcXVlbmN5Jyxcblx0fTsgLy8gZW5kIGRlZmF1bHRzXG5cblx0Ly8gVGhlIGFjdHVhbCBwbHVnaW4gY29uc3RydWN0b3Jcblx0ZnVuY3Rpb24gUGx1Z2luKCBlbGVtZW50LCBvcHRpb25zICkge1xuXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblxuXHRcdC8vIGpRdWVyeSBoYXMgYW4gZXh0ZW5kIG1ldGhvZCB3aGljaCBtZXJnZXMgdGhlIGNvbnRlbnRzIG9mIHR3byBvclxuXHRcdC8vIG1vcmUgb2JqZWN0cywgc3RvcmluZyB0aGUgcmVzdWx0IGluIHRoZSBmaXJzdCBvYmplY3QuIFRoZSBmaXJzdCBvYmplY3Rcblx0XHQvLyBpcyBnZW5lcmFsbHkgZW1wdHkgYXMgd2UgZG9uJ3Qgd2FudCB0byBhbHRlciB0aGUgZGVmYXVsdCBvcHRpb25zIGZvclxuXHRcdC8vIGZ1dHVyZSBpbnN0YW5jZXMgb2YgdGhlIHBsdWdpblxuXHRcdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMgKTtcblxuXHRcdHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG5cdFx0dGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fSAvLyBlbmQgY29uc3RydWN0b3JcblxuXHRQbHVnaW4ucHJvdG90eXBlID0ge1xuXG5cdFx0aW5pdDogZnVuY3Rpb24oIHJlc2V0LCBhbW91bnQgKSB7XG5cdFx0XHQvLyBQbGFjZSBpbml0aWFsaXphdGlvbiBsb2dpYyBoZXJlXG5cdFx0XHQvLyBZb3UgYWxyZWFkeSBoYXZlIGFjY2VzcyB0byB0aGUgRE9NIGVsZW1lbnQgYW5kXG5cdFx0XHQvLyB0aGUgb3B0aW9ucyB2aWEgdGhlIGluc3RhbmNlLCBlLmcuIHRoaXMuZWxlbWVudFxuXHRcdFx0Ly8gYW5kIHRoaXMub3B0aW9uc1xuXHRcdFx0Ly8geW91IGNhbiBhZGQgbW9yZSBmdW5jdGlvbnMgbGlrZSB0aGUgb25lIGJlbG93IGFuZFxuXHRcdFx0Ly8gY2FsbCB0aGVtIGxpa2Ugc286IHRoaXMueW91ck90aGVyRnVuY3Rpb24odGhpcy5lbGVtZW50LCB0aGlzLm9wdGlvbnMpLlxuXG5cdFx0XHR0aGlzLmZyZXF1ZW5jeVN3aXRjaGVyKCB0aGlzLmVsZW1lbnQsIHRoaXMub3B0aW9ucyApO1xuXG5cdFx0fSxcblxuXHRcdGZyZXF1ZW5jeVN3aXRjaGVyOiBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucyApIHtcblx0XHRcdGlmICggb3B0aW9ucy5sZXZlbHNfY29udGFpbmVyLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRcdCQoIG9wdGlvbnMuc2luZ2xlX2xldmVsX3N1bW1hcnlfc2VsZWN0b3IsIGVsZW1lbnQgKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCQoIG9wdGlvbnMuZmxpcHBlZF9pdGVtcywgJCh0aGlzKSApLndyYXBBbGwoICc8ZGl2IGNsYXNzPVwiZmxpcHBlclwiLz4nICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkKCBvcHRpb25zLmZyZXF1ZW5jeV9zZWxlY3RvciwgZWxlbWVudCApLmNoYW5nZSggZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRcdHZhciBsZXZlbF9udW1iZXIgPSAkKHRoaXMpLmRhdGEoJ21lbWJlci1sZXZlbC1udW1iZXInKTtcblx0XHRcdFx0XHR2YXIgZnJlcXVlbmN5c3RyaW5nID0gJCh0aGlzKS52YWwoKTtcblx0XHRcdFx0ICAgIHZhciBmcmVxdWVuY3kgPSBmcmVxdWVuY3lzdHJpbmcuc3BsaXQoJyAtICcpWzFdO1xuXHRcdFx0XHQgICAgdmFyIGZyZXF1ZW5jeV9uYW1lID0gZnJlcXVlbmN5c3RyaW5nLnNwbGl0KCcgLSAnKVswXTtcblx0XHRcdFx0ICAgIGlmICggdHlwZW9mIGxldmVsX251bWJlciAhPT0gJ3VuZGVmaW5lZCcgKSB7XG5cdFx0XHRcdFx0XHR2YXIgYW1vdW50ID0gJCggb3B0aW9ucy5hbW91bnRfc2VsZWN0b3IgKyAnW2RhdGEtbWVtYmVyLWxldmVsLW51bWJlcj1cIicgKyBsZXZlbF9udW1iZXIgKyAnXCJdJykudmFsKCk7XG5cdFx0XHRcdFx0XHQkKCBvcHRpb25zLnNpbmdsZV9sZXZlbF9zdW1tYXJ5X3NlbGVjdG9yLCBlbGVtZW50KS5yZW1vdmVDbGFzcyggJ2ZsaXBwZWQnICk7XG5cdFx0XHRcdFx0XHQkKCBvcHRpb25zLnNpbmdsZV9sZXZlbF9zdW1tYXJ5X3NlbGVjdG9yLCBlbGVtZW50KS5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcblx0XHRcdFx0XHRcdCQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIG9wdGlvbnMuc2luZ2xlX2xldmVsX3N1bW1hcnlfc2VsZWN0b3IgKS5hZGRDbGFzcyggJ2ZsaXBwZWQnICk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggb3B0aW9ucy5sZXZlbF9mcmVxdWVuY3lfdGV4dF9zZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdFx0XHRcdFx0JChvcHRpb25zLmxldmVsX2ZyZXF1ZW5jeV90ZXh0X3NlbGVjdG9yLCBlbGVtZW50KS50ZXh0KGZyZXF1ZW5jeV9uYW1lKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cdFx0fSwgLy8gZW5kIGZyZXF1ZW5jeVN3aXRjaGVyXG5cblx0fTsgLy8gZW5kIFBsdWdpbi5wcm90b3R5cGVcblxuXHQvLyBBIHJlYWxseSBsaWdodHdlaWdodCBwbHVnaW4gd3JhcHBlciBhcm91bmQgdGhlIGNvbnN0cnVjdG9yLFxuXHQvLyBwcmV2ZW50aW5nIGFnYWluc3QgbXVsdGlwbGUgaW5zdGFudGlhdGlvbnNcblx0JC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICggISAkLmRhdGEoIHRoaXMsICdwbHVnaW5fJyArIHBsdWdpbk5hbWUgKSApIHtcblx0XHRcdFx0JC5kYXRhKCB0aGlzLCAncGx1Z2luXycgKyBwbHVnaW5OYW1lLCBuZXcgUGx1Z2luKCB0aGlzLCBvcHRpb25zICkgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApO1xuIl19
