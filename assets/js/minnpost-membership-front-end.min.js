"use strict";!function(i){i(document).ready(function(){0<i(".m-form-membership-benefit").length&&(2===performance.navigation.type&&location.reload(!0),i(".a-benefit-button.a-button-disabled").removeAttr("disabled"),i(".a-benefit-button").click(function(e){e.preventDefault();var n=i(this),a=i(".m-benefit-message",i(this).parent()),l=i("select",i(this).parent()),t=minnpost_membership_settings;n.text("Processing").addClass("a-button-disabled"),i(".a-benefit-button").addClass("a-button-disabled");var s={};"partner-offers"===i('input[name="benefit-name"]').val()&&(s={action:"benefit_form_submit",minnpost_membership_benefit_form_nonce:n.data("benefit-nonce"),current_url:i('input[name="current_url"]').val(),"benefit-name":i('input[name="benefit-name"]').val(),instance_id:i('[name="instance-id-'+n.val()+'"]').val(),post_id:n.val(),is_ajax:"1"},i.post(t.ajaxurl,s,function(t){!0===t.success?(n.val(t.data.button_value).text(t.data.button_label).removeClass("a-button-disabled").addClass(t.data.button_class).prop(t.data.button_attr,!0),a.html(t.data.message).addClass("m-benefit-message-visible "+t.data.message_class),0<l.length&&l.prop("disabled",!0),i(".a-benefit-button").not(n).val(t.data.button_value).attr("disabled",!0)):(void 0===t.data.remove_instance_value||i("option",l).each(function(e){i(this).val()===t.data.remove_instance_value&&i(this).remove()}),""!==t.data.button_label?(n.show(),n.val(t.data.button_value).text(t.data.button_label).removeClass("a-button-disabled").addClass(t.data.button_class).prop(t.data.button_attr,!0)):n.hide(),i(".a-benefit-button").not(n).removeClass("a-button-disabled"),a.html(t.data.message).addClass("m-benefit-message-visible "+t.data.message_class))}))}))}),i(".a-refresh-page").click(function(e){e.preventDefault(),location.reload()})}(jQuery),function(r){r(document).ready(function(){r(".m-support-cta-top .a-support-button").click(function(e){var t,n,a,l,s,i="";0<r("svg",r(this)).length&&(i=r("svg",r(this)).attr("title")+" "),i+=r(this).text(),t="event",n="Support CTA - Header",a="Click: "+i,l=location.pathname,"undefined"!=typeof ga&&(void 0===s?ga("send",t,n,a,l):ga("send",t,n,a,l,s))})})}(jQuery),function(m,e,t,n){var a="minnpostMembership",l={debug:!1,amount_selector_standalone:"#amount-item #amount",frequency_selector_standalone:'.m-membership-fast-select input[type="radio"]',level_viewer_container:".a-show-level",level_name:".a-level",user_current_level:".a-current-level",user_new_level:".a-new-level",amount_viewer:".amount h3",frequency_selector_in_levels:".a-form-item-membership-frequency",frequency_selector_in_levels_type:"select",levels_container:".o-membership-member-levels",single_level_container:".m-membership-member-level",single_level_summary_selector:".m-member-level-brief",flipped_items:"div.amount, div.enter",level_frequency_text_selector:".show-frequency",choose_amount_selector_in_levels:".amount .a-button-flip",amount_selector_in_levels:".enter input.amount-entry"};function s(e,t){this.element=e,this.options=m.extend({},l,t),this._defaults=l,this._name=a,this.init()}s.prototype={init:function(e,t){this.catchHashLinks(this.element,this.options),this.levelFlipper(this.element,this.options),this.startLevelClick(this.element,this.options),this.submitForm(this.element,this.options)},analyticsEventTrack:function(e,t,n,a,l){"undefined"!=typeof ga&&(void 0===l?ga("send",e,t,n,a):ga("send",e,t,n,a,l))},catchHashLinks:function(e,t){m('a[href*="#"]:not([href="#"])',e).click(function(e){var t;if(0==(t=m(e.target)).parent(".comment-title").length&&location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&(t=(t=m(this.hash)).length?t:m("[name="+this.hash.slice(1)+"]")).length)return m("html,body").animate({scrollTop:t.offset().top},1e3),!1})},levelFlipper:function(t,n){var a=this,l="",s=0,i="",r=0,o="",_="",c="";"undefined"!=typeof minnpost_membership_data&&0<m(n.user_current_level).length&&(l=minnpost_membership_data.current_user.previous_amount),0<m(n.amount_selector_standalone).length&&(s=m(n.amount_selector_standalone).val(),o=m(n.frequency_selector_standalone+":checked").val(),_=o.split(" - ")[1],c=o.split(" - ")[0],i=a.checkLevel(s,_,c,l,t,n),a.showNewLevel(t,n,i),m(n.frequency_selector_standalone).change(function(){o=m(n.frequency_selector_standalone+":checked").val(),_=o.split(" - ")[1],c=o.split(" - ")[0],i=a.checkLevel(m(n.amount_selector_standalone).val(),m(n.frequency_selector_standalone+":checked").attr("data-year-frequency"),c,l,t,n),a.showNewLevel(t,n,i)}),m(n.amount_selector_standalone).bind("keyup mouseup",function(){o=m(n.frequency_selector_standalone+":checked").val(),_=o.split(" - ")[1],c=o.split(" - ")[0],m(this).data("last-value")!=m(this).val()&&(m(this).data("last-value",m(this).val()),i=a.checkLevel(m(n.amount_selector_standalone).val(),m(n.frequency_selector_standalone+":checked").attr("data-year-frequency"),c,l,t,n),a.showNewLevel(t,n,i))})),0<m(n.levels_container).length&&(m(n.single_level_summary_selector,t).each(function(){m(n.flipped_items,m(this)).wrapAll('<div class="flipper"/>')}),m(n.frequency_selector_in_levels,t).on("change",function(e){r=m(this).data("member-level-number"),o=m(this).val(),_=o.split(" - ")[1],c=o.split(" - ")[0],void 0!==r?(m(n.single_level_summary_selector,t).removeClass("flipped"),m(n.single_level_container,t).removeClass("active"),m(e.target).closest(n.single_level_summary_selector).addClass("flipped"),1==_?m(n.amount_selector_in_levels,m(n.single_level_container+"-"+r)).val(m(n.amount_viewer,m(n.single_level_container+"-"+r)).data("default-yearly")):12==_&&m(n.amount_selector_in_levels,m(n.single_level_container+"-"+r)).val(m(n.amount_viewer,m(n.single_level_container+"-"+r)).data("default-monthly")),s=m(n.amount_selector_in_levels+'[data-member-level-number="'+r+'"]').val(),i=a.checkLevel(s,_,c,l,t,n),a.changeFrequency(o,i.name,t,n)):0<m(n.level_frequency_text_selector).length&&(m(n.level_frequency_text_selector,t).text(c),m(n.single_level_container).each(function(){void 0!==(r=m(n.amount_selector_in_levels,m(this)).data("member-level-number"))&&(s=m(n.amount_selector_in_levels,m(this)).val(),i=a.checkLevel(s,_,c,l,t,n))})),a.changeAmountPreview(o,i.name,t,n)})),0<m(n.choose_amount_selector_in_levels).length&&m(n.choose_amount_selector_in_levels,t).click(function(e){r=m(n.frequency_selector_in_levels,t).data("member-level-number"),m(n.single_level_summary_selector,t).removeClass("flipped"),m(n.single_level_container,t).removeClass("active"),m(e.target).closest(n.single_level_summary_selector).addClass("flipped"),o=m(n.frequency_selector_in_levels,m(this).parent()).val(),_=o.split(" - ")[1],s=m(n.amount_selector_in_levels+'[data-member-level-number="'+r+'"]').val(),i=a.checkLevel(s,_,c,l,t,n),e.preventDefault()})},checkLevel:function(e,t,n,a,l,s){var i,r=parseInt(e)*parseInt(t);if(void 0!==a&&""!==a){var o=parseInt(a.prior_year_contributions),_=parseInt(a.coming_year_contributions),c=parseInt(a.annual_recurring_amount);"one-time"===n?o+=r:c+=r,r=Math.max(o,_,c)}return i=this.getLevel(r),m("h2",s.single_level_summary_selector).each(function(){m(this).text()==i.name&&(m(s.single_level_container,l).removeClass("active"),m(this).parent().parent().addClass("active"))}),i},getLevel:function(e){var t=[];return 0<e&&e<60?(t.name="Bronze",t.number=1):59<e&&e<120?(t.name="Silver",t.number=2):119<e&&e<240?(t.name="Gold",t.number=3):239<e&&(t.name="Platinum",t.number=4),t},showNewLevel:function(e,t,n){var a="",l=t.level_viewer_container,s=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})};"undefined"!=typeof minnpost_membership_data&&(a=minnpost_membership_data.member_level_prefix),0<m(t.level_viewer_container).length&&(m(t.level_viewer_container).prop("class","a-show-level a-show-level-"+n.name.toLowerCase()),0<m(t.user_current_level).length&&0<minnpost_membership_data.current_user.member_level.length&&(0<m(t.level_viewer_container).length&&(l=t.level_viewer_container+" a"),minnpost_membership_data.current_user.member_level.replace(a,"")!==n.name.toLowerCase()?m(l).html(s(m(t.level_viewer_container).data("changed"))):m(l).html(s(m(t.level_viewer_container).data("not-changed")))),m(t.level_name,t.level_viewer_container).text(n.name))},changeFrequency:function(i,e,t,r){m(r.single_level_summary_selector).each(function(){var e=m(r.amount_viewer,m(this)).text(),t=m(r.amount_viewer,m(this)).data("month"),n=m(r.amount_viewer,m(this)).data("year"),a=m(r.amount_viewer,m(this)).data("one-time"),l=i.split(" - ")[0],s=parseInt(i.split(" - ")[1]);m(r.frequency_selector_in_levels).val(i),m(r.frequency_selector_in_levels).prop("selected",i),"per month"==l?(e=t,m(r.amount_viewer,m(this)).removeClass("smaller")):"per year"==l?(e=n,m(r.amount_viewer,m(this)).addClass("smaller")):"one-time"==l&&(e=a,m(r.amount_viewer,m(this)).addClass("smaller")),m(r.amount_viewer,m(this)).text(e),m(r.frequency_selector_in_levels,m(this)).data("frequency",s)})},changeAmountPreview:function(s,e,t,i){m(i.single_level_summary_selector).each(function(){var e=m(i.amount_viewer,m(this)).text(),t=m(i.amount_viewer,m(this)).data("month"),n=m(i.amount_viewer,m(this)).data("year"),a=m(i.amount_viewer,m(this)).data("one-time"),l=s.split(" - ")[0];"per month"==l?(e=t,m(i.amount_viewer,m(this)).removeClass("smaller")):"per year"==l?(e=n,m(i.amount_viewer,m(this)).addClass("smaller")):"one-time"==l&&(e=a,m(i.amount_viewer,m(this)).addClass("smaller")),m(i.amount_viewer,m(this)).text(e)})},startLevelClick:function(n,a){m(".start-level").click(function(){var e=m(this).prop("class"),t=e[e.length-1];m(a.single_level_summary_selector,n).removeClass("flipped"),m(a.single_level_container,n).removeClass("active"),m(a.single_level_container+"-"+t,n).addClass("active"),m(a.single_level_container+"-"+t+" "+a.single_level_summary_selector).addClass("flipped")})},submitForm:function(e,t){var n=this;m(e).submit(function(e){n.analyticsEventTrack("event","Support Us","Become A Member",location.pathname)})}},m.fn[a]=function(e){return this.each(function(){m.data(this,"plugin_"+a)||m.data(this,"plugin_"+a,new s(this,e))})}}(jQuery,window,document);